{"version":3,"sources":["webpack:///build/js/reg.91d8.js","webpack:///./src/mini/components/register.vue?2c7b","webpack:///./src/mini/components/register.vue","webpack:///src/mini/components/register.vue"],"names":["webpackJsonp","AzkC","module","__webpack_exports__","__webpack_require__","render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","_v","directives","name","rawName","value","form","expression","attrs","type","placeholder","maxlength","domProps","on","input","$event","target","composing","$set","tel","length","getCodeDisabled","src","verify_url","alt","width","height","click","change_verify","disabled","codeDisabled","getCode","_s","codeText","form_disabled","bind_phone","sub_text","id","checked","Array","isArray","agree","_i","change","$$a","$$el","$$c","$$i","concat","slice","for","href","staticRenderFns","esExports","W572","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_register_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_7fc4cd0c_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_register_vue__","normalizeComponent","Component","w9M0","__WEBPACK_IMPORTED_MODULE_0__assets_js_http__","mixins","mounted","setTitle","document","body","style","background","data","code","c","t","computed","test","methods","vm","apiPost","phone","phone_code","then","res","$msg","msg","setTimeout","history","go","handleError","Math","random","that","cb","n","clearInterval","setInterval","parseInt","getCodeAjax","_this","verify","beforeRouteLeave","to","from","next","window","removeAttribute"],"mappings":"AAAAA,cAAc,KAERC,KACA,SAAUC,EAAQC,EAAqBC,GAE7C,YCLA,IAAAC,GAAA,WAA0B,GAAAC,GAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,CAAwB,OAAAE,GAAA,OAAiBE,YAAA,QAAkBN,EAAAO,GAAA,GAAAP,EAAAQ,GAAA,KAAAJ,EAAA,OAAkCE,YAAA,cAAwBF,EAAA,SAAcK,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAZ,EAAAa,KAAA,IAAAC,WAAA,aAA4EJ,KAAA,QAAAC,QAAA,YAA+BL,YAAA,aAAAS,OAAkCC,KAAA,MAAAC,YAAA,YAAAC,UAAA,MAAwDC,UAAWP,MAAAZ,EAAAa,KAAA,KAAuBO,IAAKC,MAAA,SAAAC,GAAyBA,EAAAC,OAAAC,WAAsCxB,EAAAyB,KAAAzB,EAAAa,KAAA,MAAAS,EAAAC,OAAAX,WAAiDZ,EAAAQ,GAAA,KAAAJ,EAAA,QAAyBK,aAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAAZ,EAAAa,KAAAa,IAAAC,QAAA,GAAA3B,EAAA4B,gBAAAd,WAAA,4CAA0IR,YAAA,kBAA8BN,EAAAQ,GAAA,cAAAR,EAAAQ,GAAA,KAAAJ,EAAA,OAA6CE,YAAA,cAAwBF,EAAA,OAAYE,YAAA,QAAkBF,EAAA,SAAcK,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAZ,EAAAa,KAAA,EAAAC,WAAA,WAAsER,YAAA,aAAAS,OAAkCC,KAAA,OAAAE,UAAA,IAAAD,YAAA,UAAqDE,UAAWP,MAAAZ,EAAAa,KAAA,GAAqBO,IAAKC,MAAA,SAAAC,GAAyBA,EAAAC,OAAAC,WAAsCxB,EAAAyB,KAAAzB,EAAAa,KAAA,IAAAS,EAAAC,OAAAX,aAA+CZ,EAAAQ,GAAA,KAAAJ,EAAA,OAA0BE,YAAA,QAAkBF,EAAA,OAAYW,OAAOc,IAAA7B,EAAA8B,WAAAC,IAAA,GAAAC,MAAA,MAAAC,OAAA,MAA0Db,IAAKc,MAAA,SAAAZ,GAAyBtB,EAAAmC,wBAAuBnC,EAAAQ,GAAA,KAAAJ,EAAA,OAA4BE,YAAA,cAAwBF,EAAA,OAAYE,YAAA,QAAkBF,EAAA,SAAcK,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAZ,EAAAa,KAAA,KAAAC,WAAA,cAA4ER,YAAA,aAAAS,OAAkCC,KAAA,MAAAE,UAAA,IAAAkB,SAAA,GAAApC,EAAA4B,gBAAAX,YAAA,YAA0FE,UAAWP,MAAAZ,EAAAa,KAAA,MAAwBO,IAAKC,MAAA,SAAAC,GAAyBA,EAAAC,OAAAC,WAAsCxB,EAAAyB,KAAAzB,EAAAa,KAAA,OAAAS,EAAAC,OAAAX,aAAkDZ,EAAAQ,GAAA,KAAAJ,EAAA,OAA0BE,YAAA,QAAkBF,EAAA,UAAeE,YAAA,wBAAAS,OAA2CC,KAAA,SAAAoB,SAAA,GAAApC,EAAA4B,iBAAA,GAAA5B,EAAAqC,cAAgFjB,IAAKc,MAAAlC,EAAAsC,WAAqBtC,EAAAQ,GAAAR,EAAAuC,GAAAvC,EAAAwC,iBAAAxC,EAAAQ,GAAA,KAAAJ,EAAA,OAA2DE,YAAA,cAAwBF,EAAA,UAAeE,YAAA,gCAAAS,OAAmDC,KAAA,SAAAoB,SAAA,GAAApC,EAAAyC,eAAkDrB,IAAKc,MAAA,SAAAZ,GAAyBtB,EAAA0C,iBAAmB1C,EAAAQ,GAAAR,EAAAuC,GAAAvC,EAAA2C,eAAA3C,EAAAQ,GAAA,KAAAJ,EAAA,OAAyDE,YAAA,cAAwBF,EAAA,OAAAA,EAAA,SAAwBK,aAAaC,KAAA,QAAAC,QAAA,UAAAC,MAAAZ,EAAAa,KAAA,MAAAC,WAAA,eAA8ER,YAAA,cAAAS,OAAmCC,KAAA,WAAA4B,GAAA,SAA+BzB,UAAW0B,QAAAC,MAAAC,QAAA/C,EAAAa,KAAAmC,OAAAhD,EAAAiD,GAAAjD,EAAAa,KAAAmC,MAAA,SAAAhD,EAAAa,KAAA,OAAwFO,IAAK8B,OAAA,SAAA5B,GAA0B,GAAA6B,GAAAnD,EAAAa,KAAAmC,MAAAI,EAAA9B,EAAAC,OAAA8B,IAAAD,EAAAP,OAA0E,IAAAC,MAAAC,QAAAI,GAAA,CAAuB,GAAAG,GAAAtD,EAAAiD,GAAAE,EAAA,KAAiCC,GAAAP,QAAiBS,EAAA,IAAAtD,EAAAa,KAAAmC,MAAAG,EAAAI,QAAlD,QAAiGD,GAAA,IAAAtD,EAAAa,KAAAmC,MAAAG,EAAAK,MAAA,EAAAF,GAAAC,OAAAJ,EAAAK,MAAAF,EAAA,SAAyEtD,GAAAyB,KAAAzB,EAAAa,KAAA,QAAAwC,OAAoCrD,EAAAQ,GAAA,KAAAJ,EAAA,SAA0BW,OAAO0C,IAAA,WAAezD,EAAAQ,GAAA,YAAAR,EAAAQ,GAAA,KAAAJ,EAAA,KAAyCE,YAAA,OAAAS,OAA0B2C,KAAA,OAAY1D,EAAAQ,GAAA,sBACniGmD,GAAA,WAAoC,GAAA3D,GAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,CAAwB,OAAAE,GAAA,OAAiBE,YAAA,aAAuBF,EAAA,KAAUE,YAAA,yBAAmCN,EAAAQ,GAAA,2BACxLoD,GAAiB7D,SAAA4D,kBACjB9D,GAAA,KDUMgE,KACA,SAAUjE,EAAQC,EAAqBC,GAE7C,YACAgE,QAAOC,eAAelE,EAAqB,cAAgBe,OAAO,GAC7C,IAAIoD,GAAoHlE,EAAoB,QElBjKmE,EAAAnE,EAAA,QAAAoE,EAAApE,EAAA,QAaAqE,EAAAD,EACAF,EAAA,EACAC,EAAA,GATA,EAEA,KAEA,KAEA,KAUApE,GAAA,QAAAsE,EAAA,SFyBMC,KACA,SAAUxE,EAAQC,EAAqBC,GAE7C,YACqB,IAAIuE,GAAgDvE,EAAoB,OGZ7FD,GAAA,GHqDIyE,QGnDJD,EAAA,SHoDIE,QAAS,WACLtE,KAAKuE,SGnDb,QHoDQC,SAASC,KAAKC,MAAMC,WGlD5B,QHoDIC,KAAM,WACF,OACIlC,SGlDZ,OHmDYN,cGlDZ,EHmDYxB,MACIa,IGlDhB,GHmDgBoD,KGlDhB,GHmDgB9B,MGlDhB,GHmDgB+B,EGjDhB,IHmDYvC,SGlDZ,QHmDYwC,EGlDZ,GHmDYlD,WGjDZ,0BHqDImD,UACIrD,gBAAiB,WACb,MAAI,gBAAgBsD,KAAKjF,KAAKY,KAAKa,KGlD/C,EAEA,GHsDQe,cAAe,WACX,MAAI,gBAAgByC,KAAKjF,KAAKY,KAAKa,MAAiC,GAAzBzB,KAAKY,KAAKiE,KAAKnD,OAClD1B,KAAKY,KAAKmC,OACV/C,KAAK0C,SGlDzB,OACA,IHoDoB1C,KAAK0C,SGlDzB,UACA,GAIA,IHqDIwC,SAEIzC,WAAY,WACR,GAAI0C,GAAKnF,IAETA,MAAKoF,QGnDjB,mBHmDgCC,MAAOrF,KAAKY,KAAKa,IAAK6D,WAAYtF,KAAKY,KAAKiE,KAAM9B,MAAO/C,KAAKY,KAAKmC,QAASwC,KAAK,SAAUC,GACvGA,EAAIX,MACJM,EAAGM,KAAKD,EGlD5BE,KHmDoBC,WAAW,WACPC,QAAQC,IGlDhC,IACA,MHoDoBV,EAAGW,YGlDvBN,MHsDQtD,cAAe,WACXlC,KAAK6B,WAAa7B,KAAK6B,WAAa,MAAQkE,KGlDxDC,UHoDQ3D,QAAS,WACL,GAAI4D,GGlDhBjG,KHmDgBkG,EAAK,WACLD,EAAK7D,cGlDrB,CHmDgB,IAAI+D,GGjDpB,EHmDgBC,eAAcH,EGlD9BlB,EHoDgBkB,GAAKlB,EAAIsB,YAAY,WACbF,EAAI,GACJA,EAAIG,SAASH,GGlDrC,EHmDwBF,EAAK1D,SAAW4D,EGlDxC,QHoDwBC,cAAcH,EGlDtClB,GHmDwBoB,EGlDxB,GHmDwBF,EAAK1D,SGlD7B,QHmDwB0D,EAAK7D,cGlD7B,IAEA,KHoDYpC,MAAKuG,YGlDjBL,IHoDQK,YAAa,SAAqBL,GGlD1C,GAAAM,GAAAxG,KHqDgBmF,EAAKnF,IAGTA,MAAKoF,QGvDjB,8BHuDgCC,MAAOrF,KAAKY,KAAKa,IAAKgF,OAAQzG,KAAKY,KAAKkE,IAAKS,KAAK,SAAUC,GACxEA,EAAIX,MACJM,EAAGM,KAAKD,EGrD5BE,KHsDqC,kBAANQ,IGpD/BA,MHwDoBM,EGrDpBtE,gBHsDoBiD,EAAGW,YGrDvBN,QH0DIkB,iBAAkB,SAA0BC,EAAIC,EAAMC,GGpD1DA,IHsDQC,OAAOtC,SAASC,KAAKsC,gBGrD7B","file":"build/js/reg.91d8.js","sourcesContent":["webpackJsonp([12],{\n\n/***/ \"AzkC\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reg\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"form-item\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.tel),expression:\"form.tel\"},{name:\"focus\",rawName:\"v-focus\"}],staticClass:\"needsclick\",attrs:{\"type\":\"tel\",\"placeholder\":\"请输入您的手机号码\",\"maxlength\":\"11\"},domProps:{\"value\":(_vm.form.tel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"tel\", $event.target.value)}}}),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.form.tel.length && _vm.getCodeDisabled == 1),expression:\"form.tel.length && getCodeDisabled == 1\"}],staticClass:\"form-err-tips\"},[_vm._v(\"手机号不正确\")])]),_vm._v(\" \"),_c('div',{staticClass:\"form-item\"},[_c('div',{staticClass:\"f-l\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.c),expression:\"form.c\"}],staticClass:\"needsclick\",attrs:{\"type\":\"text\",\"maxlength\":\"4\",\"placeholder\":\"请输入验证码\"},domProps:{\"value\":(_vm.form.c)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"c\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"f-r\"},[_c('img',{attrs:{\"src\":_vm.verify_url,\"alt\":\"\",\"width\":\"180\",\"height\":\"60\"},on:{\"click\":function($event){_vm.change_verify();}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"form-item\"},[_c('div',{staticClass:\"f-l\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.code),expression:\"form.code\"}],staticClass:\"needsclick\",attrs:{\"type\":\"tel\",\"maxlength\":\"4\",\"disabled\":_vm.getCodeDisabled == 1,\"placeholder\":\"请输入您的验证码\"},domProps:{\"value\":(_vm.form.code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"code\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"f-r\"},[_c('button',{staticClass:\"ui-btn ui-btn-getCode\",attrs:{\"type\":\"button\",\"disabled\":_vm.getCodeDisabled == 1 || _vm.codeDisabled == true},on:{\"click\":_vm.getCode}},[_vm._v(_vm._s(_vm.codeText))])])]),_vm._v(\" \"),_c('div',{staticClass:\"form-item\"},[_c('button',{staticClass:\"ui-btn ui-btn-block ui-btn-l2\",attrs:{\"type\":\"button\",\"disabled\":_vm.form_disabled == 1},on:{\"click\":function($event){_vm.bind_phone()}}},[_vm._v(_vm._s(_vm.sub_text))])]),_vm._v(\" \"),_c('div',{staticClass:\"form-item\"},[_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.agree),expression:\"form.agree\"}],staticClass:\"ui-checkbox\",attrs:{\"type\":\"checkbox\",\"id\":\"agree\"},domProps:{\"checked\":Array.isArray(_vm.form.agree)?_vm._i(_vm.form.agree,null)>-1:(_vm.form.agree)},on:{\"change\":function($event){var $$a=_vm.form.agree,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.form.agree=$$a.concat([$$v]))}else{$$i>-1&&(_vm.form.agree=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.$set(_vm.form, \"agree\", $$c)}}}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":\"agree\"}},[_vm._v(\"已阅读并同意\")]),_vm._v(\" \"),_c('a',{staticClass:\"skin\",attrs:{\"href\":\"#\"}},[_vm._v(\"《爱悦妍服务协议》\")])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"top_tips\"},[_c('i',{staticClass:\"iconfont icon-tanhao\"}),_vm._v(\" 请您绑定手机号码，以便更好的为您服务\")])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"W572\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_register_vue__ = __webpack_require__(\"w9M0\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_7fc4cd0c_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_register_vue__ = __webpack_require__(\"AzkC\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_register_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_7fc4cd0c_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_buble_transforms_node_modules_vue_loader_lib_selector_type_template_index_0_register_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"w9M0\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__assets_js_http__ = __webpack_require__(\"MSrN\");\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    mixins: [__WEBPACK_IMPORTED_MODULE_0__assets_js_http__[\"default\"]],\n    mounted: function mounted() {\n        this.setTitle('绑定手机');\n        document.body.style.background = '#fff';\n    },\n    data: function data() {\n        return {\n            sub_text: '立即绑定',\n            codeDisabled: false,\n            form: {\n                tel: '',\n                code: '',\n                agree: '',\n                c: ''\n            },\n            codeText: '获取验证码',\n            t: '',\n            verify_url: '/mini/Home/get_verify'\n        };\n    },\n\n    computed: {\n        getCodeDisabled: function getCodeDisabled() {\n            if (/^1[3-9]\\d{9}$/.test(this.form.tel)) {\n                return 0;\n            } else {\n                return 1;\n            }\n        },\n        form_disabled: function form_disabled() {\n            if (/^1[3-9]\\d{9}$/.test(this.form.tel) && this.form.code.length == 4) {\n                if (this.form.agree) {\n                    this.sub_text = '立即绑定';\n                    return 0;\n                } else {\n                    this.sub_text = '请同意服务协议';\n                    return 1;\n                }\n            } else {\n                return 1;\n            }\n        }\n    },\n    methods: {\n        //立即绑定\n        bind_phone: function bind_phone() {\n            var vm = this,\n                url = \"/mini/Home/bind\";\n            this.apiPost(url, { phone: this.form.tel, phone_code: this.form.code, agree: this.form.agree }).then(function (res) {\n                if (res.code) {\n                    vm.$msg(res.msg);\n                    setTimeout(function () {\n                        history.go(-1);\n                    }, 1000);\n                } else {\n                    vm.handleError(res);\n                }\n            });\n        },\n        change_verify: function change_verify() {\n            this.verify_url = this.verify_url + \"?r=\" + Math.random();\n        },\n        getCode: function getCode() {\n            var that = this;\n            var cb = function cb() {\n                that.codeDisabled = true;\n                var n = 59;\n\n                clearInterval(that.t);\n                var msg = '60s重试';\n                that.t = setInterval(function () {\n                    if (n > 0) {\n                        n = parseInt(n) - 1;\n                        that.codeText = n + 's重试';\n                    } else {\n                        clearInterval(that.t);\n                        n = 59;\n                        that.codeText = '获取验证码';\n                        that.codeDisabled = false;\n                    }\n                }, 1000);\n            };\n            this.getCodeAjax(cb);\n        },\n        getCodeAjax: function getCodeAjax(cb) {\n            var _this = this;\n\n            var vm = this,\n                url = \"/mini/Home/send_phone_code\";\n            // cb()\n            this.apiPost(url, { phone: this.form.tel, verify: this.form.c }).then(function (res) {\n                if (res.code) {\n                    vm.$msg(res.msg);\n                    if (typeof cb == 'function') {\n                        cb();\n                    }\n                } else {\n                    _this.change_verify();\n                    vm.handleError(res);\n                }\n            });\n        }\n    },\n    beforeRouteLeave: function beforeRouteLeave(to, from, next) {\n        next();\n        window.document.body.removeAttribute('style');\n    }\n\n});\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// build/js/reg.91d8.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"reg\"},[_vm._m(0),_vm._v(\" \"),_c('div',{staticClass:\"form-item\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.tel),expression:\"form.tel\"},{name:\"focus\",rawName:\"v-focus\"}],staticClass:\"needsclick\",attrs:{\"type\":\"tel\",\"placeholder\":\"请输入您的手机号码\",\"maxlength\":\"11\"},domProps:{\"value\":(_vm.form.tel)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"tel\", $event.target.value)}}}),_vm._v(\" \"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.form.tel.length && _vm.getCodeDisabled == 1),expression:\"form.tel.length && getCodeDisabled == 1\"}],staticClass:\"form-err-tips\"},[_vm._v(\"手机号不正确\")])]),_vm._v(\" \"),_c('div',{staticClass:\"form-item\"},[_c('div',{staticClass:\"f-l\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.c),expression:\"form.c\"}],staticClass:\"needsclick\",attrs:{\"type\":\"text\",\"maxlength\":\"4\",\"placeholder\":\"请输入验证码\"},domProps:{\"value\":(_vm.form.c)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"c\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"f-r\"},[_c('img',{attrs:{\"src\":_vm.verify_url,\"alt\":\"\",\"width\":\"180\",\"height\":\"60\"},on:{\"click\":function($event){_vm.change_verify();}}})])]),_vm._v(\" \"),_c('div',{staticClass:\"form-item\"},[_c('div',{staticClass:\"f-l\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.code),expression:\"form.code\"}],staticClass:\"needsclick\",attrs:{\"type\":\"tel\",\"maxlength\":\"4\",\"disabled\":_vm.getCodeDisabled == 1,\"placeholder\":\"请输入您的验证码\"},domProps:{\"value\":(_vm.form.code)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.form, \"code\", $event.target.value)}}})]),_vm._v(\" \"),_c('div',{staticClass:\"f-r\"},[_c('button',{staticClass:\"ui-btn ui-btn-getCode\",attrs:{\"type\":\"button\",\"disabled\":_vm.getCodeDisabled == 1 || _vm.codeDisabled == true},on:{\"click\":_vm.getCode}},[_vm._v(_vm._s(_vm.codeText))])])]),_vm._v(\" \"),_c('div',{staticClass:\"form-item\"},[_c('button',{staticClass:\"ui-btn ui-btn-block ui-btn-l2\",attrs:{\"type\":\"button\",\"disabled\":_vm.form_disabled == 1},on:{\"click\":function($event){_vm.bind_phone()}}},[_vm._v(_vm._s(_vm.sub_text))])]),_vm._v(\" \"),_c('div',{staticClass:\"form-item\"},[_c('div',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.agree),expression:\"form.agree\"}],staticClass:\"ui-checkbox\",attrs:{\"type\":\"checkbox\",\"id\":\"agree\"},domProps:{\"checked\":Array.isArray(_vm.form.agree)?_vm._i(_vm.form.agree,null)>-1:(_vm.form.agree)},on:{\"change\":function($event){var $$a=_vm.form.agree,$$el=$event.target,$$c=$$el.checked?(true):(false);if(Array.isArray($$a)){var $$v=null,$$i=_vm._i($$a,$$v);if($$el.checked){$$i<0&&(_vm.form.agree=$$a.concat([$$v]))}else{$$i>-1&&(_vm.form.agree=$$a.slice(0,$$i).concat($$a.slice($$i+1)))}}else{_vm.$set(_vm.form, \"agree\", $$c)}}}}),_vm._v(\" \"),_c('label',{attrs:{\"for\":\"agree\"}},[_vm._v(\"已阅读并同意\")]),_vm._v(\" \"),_c('a',{staticClass:\"skin\",attrs:{\"href\":\"#\"}},[_vm._v(\"《爱悦妍服务协议》\")])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"top_tips\"},[_c('i',{staticClass:\"iconfont icon-tanhao\"}),_vm._v(\" 请您绑定手机号码，以便更好的为您服务\")])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7fc4cd0c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/mini/components/register.vue\n// module id = AzkC\n// module chunks = 12","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./register.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7fc4cd0c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./register.vue\"\n/* template functional */\n  var __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/mini/components/register.vue\n// module id = W572\n// module chunks = 12","<template>\r\n    <div class=\"reg\">\r\n        <div class=\"top_tips\">\r\n            <i class=\"iconfont icon-tanhao\"></i> 请您绑定手机号码，以便更好的为您服务</div>\r\n        <div class=\"form-item\">\r\n            <input type=\"tel\" class=\"needsclick\" v-model=\"form.tel\" v-focus placeholder=\"请输入您的手机号码\" maxlength=\"11\">\r\n            <span class=\"form-err-tips\" v-show=\"form.tel.length && getCodeDisabled == 1\">手机号不正确</span>\r\n        </div>\r\n        <div class=\"form-item\">\r\n            <div class=\"f-l\">\r\n                <input type=\"text\" class=\"needsclick\" maxlength=\"4\" placeholder=\"请输入验证码\" v-model=\"form.c\">\r\n            </div>\r\n            <div class=\"f-r\"> <img :src=\"verify_url\" @click=\"change_verify();\" alt=\"\" width=\"180\" height=\"60\"> </div>\r\n\r\n        </div>\r\n        <div class=\"form-item\">\r\n            <div class=\"f-l\">\r\n                <input type=\"tel\" class=\"needsclick\" maxlength=\"4\" :disabled=\"getCodeDisabled == 1\" placeholder=\"请输入您的验证码\" v-model=\"form.code\">\r\n            </div>\r\n            <div class=\"f-r\">\r\n                <button type=\"button\" :disabled=\"getCodeDisabled == 1 || codeDisabled == true\" class=\"ui-btn ui-btn-getCode\" @click=\"getCode\">{{codeText}}</button>\r\n            </div>\r\n\r\n        </div>\r\n        <div class=\"form-item\">\r\n            <button type=\"button\" :disabled=\"form_disabled == 1\" class=\"ui-btn ui-btn-block ui-btn-l2\" @click=\"bind_phone()\">{{sub_text}}</button>\r\n        </div>\r\n        <div class=\"form-item\">\r\n            <div>\r\n                <input type=\"checkbox\" v-model=\"form.agree\" class=\"ui-checkbox\" id=\"agree\">\r\n                <label for=\"agree\">已阅读并同意</label>\r\n                <a href=\"#\" class=\"skin\">《爱悦妍服务协议》</a>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n<script>\r\nimport http from '@/assets/js/http'\r\nexport default {\r\n    mixins: [http],\r\n    mounted() {\r\n        this.setTitle('绑定手机')\r\n        document.body.style.background = '#fff'\r\n\r\n    },\r\n    data() {\r\n        return {\r\n            sub_text: '立即绑定',\r\n            codeDisabled: false,\r\n            form: {\r\n                tel: '',\r\n                code: '',\r\n                agree: '',\r\n                c: ''\r\n            },\r\n            codeText: '获取验证码',\r\n            t: '',\r\n            verify_url: '/mini/Home/get_verify',\r\n        }\r\n    },\r\n    computed: {\r\n        getCodeDisabled: function() {\r\n            if (/^1[3-9]\\d{9}$/.test(this.form.tel)) {\r\n                return 0\r\n            } else {\r\n                return 1\r\n            }\r\n\r\n        },\r\n        form_disabled: function() {\r\n            if (/^1[3-9]\\d{9}$/.test(this.form.tel) && this.form.code.length == 4) {\r\n                if (this.form.agree) {\r\n                    this.sub_text = '立即绑定'\r\n                    return 0;\r\n                } else {\r\n                    this.sub_text = '请同意服务协议'\r\n                    return 1\r\n                }\r\n\r\n            } else {\r\n                return 1\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        //立即绑定\r\n        bind_phone(){\r\n            let vm = this, url = \"/mini/Home/bind\";\r\n            this.apiPost(url, {phone: this.form.tel, phone_code: this.form.code, agree: this.form.agree}).then((res) => {\r\n                if (res.code) {\r\n                    vm.$msg(res.msg);\r\n                    setTimeout(function(){\r\n                        history.go(-1);\r\n                    },1000);                    \r\n                } else {\r\n                    vm.handleError(res)\r\n                }\r\n            })\r\n        },\r\n        change_verify(){\r\n            this.verify_url = this.verify_url + \"?r=\" + Math.random();\r\n        },\r\n        getCode() {\r\n            let that = this;\r\n            var cb = function() {\r\n                that.codeDisabled = true;\r\n                var n = 59;\r\n\r\n                clearInterval(that.t)\r\n                var msg = '60s重试'\r\n                that.t = setInterval(function() {\r\n                    if (n > 0) {\r\n                        n = parseInt(n) - 1;\r\n                        that.codeText = n + 's重试'\r\n                    } else {\r\n                        clearInterval(that.t)\r\n                        n = 59;\r\n                        that.codeText = '获取验证码'\r\n                        that.codeDisabled = false;\r\n                    }\r\n                }, 1000)\r\n            }\r\n            this.getCodeAjax(cb);\r\n        },\r\n        getCodeAjax(cb) {\r\n            let vm = this, url = \"/mini/Home/send_phone_code\";\r\n            // cb()\r\n            this.apiPost(url, {phone: this.form.tel, verify: this.form.c}).then((res) => {\r\n                if (res.code) {\r\n                    vm.$msg(res.msg)\r\n                    if (typeof cb == 'function') {\r\n                        cb()\r\n                    }\r\n                } else {\r\n                    this.change_verify()\r\n                    vm.handleError(res)\r\n                }\r\n            })\r\n        }\r\n    },\r\n    beforeRouteLeave: (to, from, next) => {\r\n        next();\r\n        window.document.body.removeAttribute('style')\r\n    }\r\n\r\n}\r\n\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/mini/components/register.vue"],"sourceRoot":""}