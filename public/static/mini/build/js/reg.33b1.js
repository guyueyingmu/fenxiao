webpackJsonp([13],{W572:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("w9M0"),r=o("cAA7"),a=o("VU/8"),s=a(i.a,r.a,null,null,null);t.default=s.exports},cAA7:function(e,t,o){"use strict";var i=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"reg"},[e._m(0),e._v(" "),o("div",{staticClass:"form-item"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.tel,expression:"form.tel"},{name:"focus",rawName:"v-focus"}],attrs:{type:"tel",placeholder:"请输入您的手机号码",maxlength:"11"},domProps:{value:e.form.tel},on:{input:function(t){t.target.composing||(e.form.tel=t.target.value)}}}),e._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:e.form.tel.length&&1==e.getCodeDisabled,expression:"form.tel.length && getCodeDisabled == 1"}],staticClass:"form-err-tips"},[e._v("手机号不正确")])]),e._v(" "),o("div",{staticClass:"form-item"},[o("div",{staticClass:"f-l"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.c,expression:"form.c"}],attrs:{type:"tel",maxlength:"4",placeholder:"请输入验证码"},domProps:{value:e.form.c},on:{input:function(t){t.target.composing||(e.form.c=t.target.value)}}})]),e._v(" "),o("div",{staticClass:"f-r"},[o("img",{attrs:{src:e.verify_url,alt:"",width:"92",height:"42"},on:{click:function(t){e.change_verify()}}})])]),e._v(" "),o("div",{staticClass:"form-item"},[o("div",{staticClass:"f-l"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.code,expression:"form.code"}],attrs:{type:"tel",maxlength:"4",disabled:1==e.getCodeDisabled,placeholder:"请输入您的验证码"},domProps:{value:e.form.code},on:{input:function(t){t.target.composing||(e.form.code=t.target.value)}}})]),e._v(" "),o("div",{staticClass:"f-r"},[o("button",{staticClass:"ui-btn ui-btn-getCode",attrs:{type:"button",disabled:1==e.getCodeDisabled||1==e.codeDisabled},on:{click:e.getCode}},[e._v(e._s(e.codeText))])])]),e._v(" "),o("div",{staticClass:"form-item"},[o("button",{staticClass:"ui-btn ui-btn-block ui-btn-l2",attrs:{type:"button",disabled:1==e.form_disabled},on:{click:function(t){e.bind_phone()}}},[e._v(e._s(e.sub_text))])]),e._v(" "),o("div",{staticClass:"form-item"},[o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:e.form.agree,expression:"form.agree"}],staticClass:"ui-checkbox",attrs:{type:"checkbox",id:"agree"},domProps:{checked:Array.isArray(e.form.agree)?e._i(e.form.agree,null)>-1:e.form.agree},on:{__c:function(t){var o=e.form.agree,i=t.target,r=!!i.checked;if(Array.isArray(o)){var a=e._i(o,null);i.checked?a<0&&(e.form.agree=o.concat(null)):a>-1&&(e.form.agree=o.slice(0,a).concat(o.slice(a+1)))}else e.form.agree=r}}}),e._v(" "),o("label",{attrs:{for:"agree"}},[e._v("已阅读并同意")]),e._v(" "),o("a",{staticClass:"skin",attrs:{href:"#"}},[e._v("《爱悦妍服务协议》")])])])])},r=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"top_tips"},[o("i",{staticClass:"iconfont icon-tanhao"}),e._v(" 请您绑定手机号码，以便更好的为您服务")])}],a={render:i,staticRenderFns:r};t.a=a},w9M0:function(e,t,o){"use strict";var i=o(3);t.a={mixins:[i.default],mounted:function(){this.setTitle("绑定手机"),document.body.style.background="#fff"},data:function(){return{sub_text:"立即绑定",codeDisabled:!1,form:{tel:"",code:"",agree:"",c:""},codeText:"获取验证码",t:"",verify_url:"/mini/Home/get_verify"}},computed:{getCodeDisabled:function(){return/^1[3-9]\d{9}$/.test(this.form.tel)?0:1},form_disabled:function(){return/^1[3-9]\d{9}$/.test(this.form.tel)&&4==this.form.code.length?this.form.agree?(this.sub_text="立即绑定",0):(this.sub_text="请同意服务协议",1):1}},methods:{bind_phone:function(){var e=this;this.apiPost("/mini/Home/bind",{phone:this.form.tel,phone_code:this.form.code,agree:this.form.agree}).then(function(t){t.code?(e.$msg(t.msg),setTimeout(function(){history.go(-1)},1e3)):e.handleError(t)})},change_verify:function(){this.verify_url=this.verify_url+"?r="+Math.random()},getCode:function(){var e=this,t=function(){e.codeDisabled=!0;var t=59;clearInterval(e.t);e.t=setInterval(function(){t>0?(t=parseInt(t)-1,e.codeText=t+"s重试"):(clearInterval(e.t),t=59,e.codeText="获取验证码",e.codeDisabled=!1)},1e3)};this.getCodeAjax(t)},getCodeAjax:function(e){var t=this;this.apiPost("/mini/Home/send_phone_code",{phone:this.form.tel,verify:this.form.c}).then(function(o){o.code?"function"==typeof e&&e():t.handleError(o)})}}}}});