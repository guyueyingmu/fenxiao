{"version":3,"sources":["webpack:///build/js/order.3f4e.js","webpack:///src/mini/components/order.vue","webpack:///./src/mini/components/order.vue","webpack:///./src/mini/components/order.vue?6741"],"names":["webpackJsonp","J8cS","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0__assets_js_http__","name","mixins","data","list","page_info","search","keyword","methods","exchange","index","vm","this","order_id","id","$confirm","msg","yes","apiPost","then","res","code","refund","$msg","handleError","loadMore","_this","page","parseInt","current_page","clearTimeout","timer","setTimeout","total_page","get_list","onSearch","searchData","status","url","apiGet","pages","_list","concat","created","setTitle","V64i","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_order_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_51115196_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_order_vue__","normalizeComponent","Component","oToY","render","_vm","_h","$createElement","_c","_self","directives","rawName","expression","staticClass","class","active","on","click","$event","_v","length","attrs","infinite-scroll-disabled","infinite-scroll-immediate-check","infinite-scroll-distance","_l","item","idx","key","goto","_s","order_number","order_status_txt","good","width","height","good_title","pay_method","credits","price","buy_num","minus_credits","total_amount","pay_status","type","_e","comment_status","staticRenderFns","esExports"],"mappings":"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","file":"build/js/order.3f4e.js","sourcesContent":["webpackJsonp([17],{\n\n/***/ \"J8cS\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__assets_js_http__ = __webpack_require__(2);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n    name: 'favorite',\n    mixins: [__WEBPACK_IMPORTED_MODULE_0__assets_js_http__[\"default\"]],\n    data: function data() {\n        return {\n            list: [],\n            page_info: {},\n            search: {\n                keyword: 0\n            }\n        };\n    },\n\n    methods: {\n        //换货\n        exchange: function exchange(index) {\n            var url = '/mini/Exchange/add',\n                vm = this,\n                data = { order_id: this.list[index].id };\n            this.$confirm({\n                msg: '确定申请换货？<br />申请换货后将有客服人员跟进处理！',\n                yes: function yes() {\n                    vm.apiPost(url, data).then(function (res) {\n                        if (res.code) {\n                            vm.list[index].exchange = 0;\n                            vm.list[index].refund = 0;\n                            vm.$msg(res.msg);\n                        } else {\n                            vm.handleError(res);\n                        }\n                    });\n                }\n            });\n        },\n\n        //退款\n        refund: function refund(index) {\n            var url = '/mini/Refund/add',\n                vm = this,\n                data = { order_id: this.list[index].id };\n            this.$confirm({\n                msg: '确定申请退款？<br />申请换货后将有客服人员跟进处理！',\n                yes: function yes() {\n                    vm.apiPost(url, data).then(function (res) {\n                        if (res.code) {\n                            vm.list[index].refund = 0;\n                            vm.list[index].exchange = 0;\n                            vm.$msg(res.msg);\n                        } else {\n                            vm.handleError(res);\n                        }\n                    });\n                }\n            });\n        },\n\n        //加载更多\n        loadMore: function loadMore() {\n            var _this = this;\n\n            var page = parseInt(this.page_info.current_page, 10);\n            clearTimeout(this.timer);\n            this.timer = setTimeout(function () {\n                if (page < _this.page_info.total_page) {\n                    _this.get_list(page + 1);\n                }\n            }, 500);\n        },\n\n        //搜索\n        onSearch: function onSearch(keyword) {\n            this.search.keyword = keyword;\n            var searchData = { status: this.search.keyword };\n            this.get_list(1, searchData);\n        },\n\n        //获取数据\n        get_list: function get_list(page, searchData) {\n            page = page || 1;\n            var url = '/mini/Order/get_list?page=' + page,\n                vm = this;\n\n            this.apiGet(url, searchData).then(function (res) {\n                if (res.code) {\n                    vm.page_info = res.data.pages;\n                    if (page < 2) {\n                        vm.list = res.data.list;\n                    } else {\n                        var _list = vm.list;\n                        _list = _list.concat(res.data.list);\n                        vm.list = _list;\n                    }\n                } else {\n                    vm.handleError(res);\n                }\n            });\n        }\n    },\n    created: function created() {\n        this.setTitle('我的订单');\n        this.get_list();\n    }\n});\n\n/***/ }),\n\n/***/ \"V64i\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_order_vue__ = __webpack_require__(\"J8cS\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_51115196_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_order_vue__ = __webpack_require__(\"oToY\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_order_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_51115196_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_order_vue__[\"a\" /* default */],\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"oToY\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"loading\",\n      rawName: \"v-loading\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }]\n  }, [_c('div', {\n    staticClass: \"ui-tags\"\n  }, [_c('span', {\n    class: {\n      'active': _vm.search.keyword == 0\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.onSearch(0)\n      }\n    }\n  }, [_vm._v(\"全部\")]), _vm._v(\" \"), _c('span', {\n    class: {\n      'active': _vm.search.keyword == 1\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.onSearch(1)\n      }\n    }\n  }, [_vm._v(\"待付款\")]), _vm._v(\" \"), _c('span', {\n    class: {\n      'active': _vm.search.keyword == 2\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.onSearch(2)\n      }\n    }\n  }, [_vm._v(\"待收货\")]), _vm._v(\" \"), _c('span', {\n    class: {\n      'active': _vm.search.keyword == 5\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.onSearch(5)\n      }\n    }\n  }, [_vm._v(\"已完成\")]), _vm._v(\" \"), _c('span', {\n    class: {\n      'active': _vm.search.keyword == 4\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.onSearch(4)\n      }\n    }\n  }, [_vm._v(\"已取消\")])]), _vm._v(\" \"), (_vm.list.length > 0) ? _c('ul', {\n    directives: [{\n      name: \"infinite-scroll\",\n      rawName: \"v-infinite-scroll\",\n      value: (_vm.loadMore),\n      expression: \"loadMore\"\n    }],\n    staticClass: \"order-list\",\n    attrs: {\n      \"infinite-scroll-disabled\": \"loadComment\",\n      \"infinite-scroll-immediate-check\": false,\n      \"infinite-scroll-distance\": \"10\"\n    }\n  }, _vm._l((_vm.list), function(item, idx) {\n    return _c('li', {\n      key: idx\n    }, [_c('div', {\n      staticClass: \"h\",\n      on: {\n        \"click\": function($event) {\n          _vm.goto('/order_detail/order_id/' + item.id)\n        }\n      }\n    }, [_vm._v(\"订单号：\" + _vm._s(item.order_number) + \"\\n                \"), _c('span', {\n      staticClass: \"status\"\n    }, [_vm._v(_vm._s(item.order_status_txt))])]), _vm._v(\" \"), _vm._l((item.orders_goods), function(good, key) {\n      return _c('div', {\n        key: key,\n        staticClass: \"m\",\n        on: {\n          \"click\": function($event) {\n            _vm.goto('/order_detail/order_id/' + item.id)\n          }\n        }\n      }, [_c('img', {\n        directives: [{\n          name: \"lazy\",\n          rawName: \"v-lazy\",\n          value: (good.good_img),\n          expression: \"good.good_img\"\n        }],\n        attrs: {\n          \"width\": \"50\",\n          \"height\": \"50\"\n        }\n      }), _vm._v(\" \"), _c('div', {\n        staticClass: \"info\"\n      }, [_c('div', {\n        staticClass: \"title\"\n      }, [_vm._v(_vm._s(good.good_title))])]), _vm._v(\" \"), _c('div', {\n        staticClass: \"tool\"\n      }, [(item.pay_method == 3) ? _c('div', [_vm._v(\"积分 \" + _vm._s(good.credits))]) : _c('div', [_vm._v(\"￥\" + _vm._s(good.price))]), _vm._v(\" \"), _c('div', [_vm._v(\"x \" + _vm._s(good.buy_num))])])])\n    }), _vm._v(\" \"), _c('div', {\n      staticClass: \"b\"\n    }, [(item.pay_method == 3) ? _c('div', [_vm._v(\"订单总额：积分 \" + _vm._s(item.minus_credits))]) : _c('div', [_vm._v(\"订单总额：￥\" + _vm._s(item.total_amount))]), _vm._v(\" \"), _c('div', [(item.pay_status == 1 && item.pay_method != 2) ? _c('button', {\n      staticClass: \"ui-btn active\",\n      attrs: {\n        \"type\": \"button\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.goto('/pay/order_id/' + item.id)\n        }\n      }\n    }, [_vm._v(\"付款\")]) : _vm._e(), _vm._v(\" \"), (item.comment_status == 1) ? _c('button', {\n      staticClass: \"ui-btn active\",\n      attrs: {\n        \"type\": \"button\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.goto('/start/order_id/' + item.id)\n        }\n      }\n    }, [_vm._v(\"评价\")]) : _vm._e(), _vm._v(\" \"), (item.refund == 1) ? _c('button', {\n      staticClass: \"ui-btn active\",\n      attrs: {\n        \"type\": \"button\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.refund(idx)\n        }\n      }\n    }, [_vm._v(\"退款\")]) : _vm._e(), _vm._v(\" \"), (item.exchange == 1) ? _c('button', {\n      staticClass: \"ui-btn active\",\n      attrs: {\n        \"type\": \"button\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.exchange(idx)\n        }\n      }\n    }, [_vm._v(\"换货\")]) : _vm._e()])])], 2)\n  })) : _c('div', {\n    staticClass: \"nodata\"\n  }, [_c('i', {\n    staticClass: \"iconfont icon-tongyongmeiyoushuju\"\n  }), _vm._v(\" \"), _c('div', [_vm._v(\"您还没有订单记录~\")])])])\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// build/js/order.3f4e.js","<template>\r\n    <div v-loading=\"loading\">\r\n        <div class=\"ui-tags\">\r\n            <span :class=\"{'active':search.keyword == 0}\" @click=\"onSearch(0)\">全部</span>\r\n            <span :class=\"{'active':search.keyword == 1}\" @click=\"onSearch(1)\">待付款</span>\r\n            <span :class=\"{'active':search.keyword == 2}\" @click=\"onSearch(2)\">待收货</span>\r\n            <span :class=\"{'active':search.keyword == 5}\" @click=\"onSearch(5)\">已完成</span>\r\n            <span :class=\"{'active':search.keyword == 4}\" @click=\"onSearch(4)\">已取消</span>\r\n\r\n        </div>\r\n        <ul class=\"order-list\" v-if=\"list.length > 0\" v-infinite-scroll=\"loadMore\" infinite-scroll-disabled=\"loadComment\" :infinite-scroll-immediate-check=\"false\" infinite-scroll-distance=\"10\">\r\n            <li v-for=\"(item,idx) in list\" :key=\"idx\">\r\n                <div class=\"h\" @click=\"goto('/order_detail/order_id/'+item.id)\">订单号：{{item.order_number}}\r\n                    <span class=\"status\">{{item.order_status_txt}}</span>\r\n                </div>\r\n                <div class=\"m\" @click=\"goto('/order_detail/order_id/'+item.id)\" v-for=\"(good,key) in item.orders_goods\" :key=\"key\">\r\n                    <img v-lazy=\"good.good_img\" width=\"50\" height=\"50\">\r\n                    <div class=\"info\">\r\n                        <div class=\"title\">{{good.good_title}}</div>\r\n                    </div>\r\n                    <div class=\"tool\">\r\n                        <div v-if=\"item.pay_method == 3\">积分 {{good.credits}}</div>\r\n                        <div v-else>￥{{good.price}}</div>\r\n                        <div>x {{good.buy_num}}</div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"b\">\r\n                    <div v-if=\"item.pay_method == 3\">订单总额：积分 {{item.minus_credits}}</div>\r\n                    <div v-else>订单总额：￥{{item.total_amount}}</div>\r\n                    <div>\r\n                        <button type=\"button\" class=\"ui-btn active\" v-if=\"item.pay_status == 1 && item.pay_method != 2\" @click=\"goto('/pay/order_id/'+item.id)\">付款</button>\r\n                        <button type=\"button\" class=\"ui-btn active\" v-if=\"item.comment_status == 1\" @click=\"goto('/start/order_id/'+item.id)\">评价</button>\r\n                        <button type=\"button\" class=\"ui-btn active\" v-if=\"item.refund == 1\" @click=\"refund(idx)\">退款</button>\r\n                        <button type=\"button\" class=\"ui-btn active\" v-if=\"item.exchange == 1\" @click=\"exchange(idx)\">换货</button>\r\n                    </div>\r\n                </div>\r\n            </li>\r\n        </ul>\r\n\r\n        <div class=\"nodata\" v-else>\r\n            <i class=\"iconfont icon-tongyongmeiyoushuju\"></i>\r\n            <div>您还没有订单记录~</div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport http from '@/assets/js/http'\r\nexport default {\r\n    name: 'favorite',\r\n    mixins: [http],\r\n    data() {\r\n        return {\r\n            list: [],\r\n            page_info: {},\r\n            search: {\r\n                keyword: 0,\r\n            },\r\n        }\r\n    },\r\n    methods: {\r\n        //换货\r\n        exchange(index) {\r\n            let url = '/mini/Exchange/add', vm = this, data = { order_id: this.list[index].id };\r\n            this.$confirm({\r\n                msg: '确定申请换货？<br />申请换货后将有客服人员跟进处理！',\r\n                yes: function() {\r\n                    vm.apiPost(url, data).then(function(res) {\r\n                        if (res.code) {\r\n                            vm.list[index].exchange = 0;\r\n                            vm.list[index].refund = 0;\r\n                            vm.$msg(res.msg);\r\n                        } else {\r\n                            vm.handleError(res)\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n\r\n        },\r\n        //退款\r\n        refund(index) {\r\n            let url = '/mini/Refund/add', vm = this, data = { order_id: this.list[index].id };\r\n            this.$confirm({\r\n                msg: '确定申请退款？<br />申请换货后将有客服人员跟进处理！',\r\n                yes: function() {\r\n                    vm.apiPost(url, data).then(function(res) {\r\n                        if (res.code) {\r\n                            vm.list[index].refund = 0;\r\n                            vm.list[index].exchange = 0;\r\n                            vm.$msg(res.msg);\r\n                        } else {\r\n                            vm.handleError(res)\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n\r\n        },\r\n        //加载更多\r\n        loadMore() {\r\n            let page = parseInt(this.page_info.current_page, 10);\r\n            clearTimeout(this.timer)\r\n            this.timer = setTimeout(() => {\r\n                if (page < this.page_info.total_page) {\r\n                    this.get_list(page + 1);\r\n                }\r\n            }, 500)\r\n\r\n\r\n        },\r\n        //搜索\r\n        onSearch(keyword) {\r\n            this.search.keyword = keyword;\r\n            let searchData = { status: this.search.keyword }\r\n            this.get_list(1, searchData)\r\n        },\r\n        //获取数据\r\n        get_list(page, searchData) {\r\n            page = page || 1;\r\n            let url = '/mini/Order/get_list?page=' + page,\r\n                vm = this;\r\n\r\n            this.apiGet(url, searchData).then(function(res) {\r\n                if (res.code) {\r\n                    vm.page_info = res.data.pages;\r\n                    if (page < 2) {\r\n                        vm.list = res.data.list;\r\n                    } else {\r\n                        let _list = vm.list;\r\n                        _list = _list.concat(res.data.list)\r\n                        vm.list = _list;\r\n                    }\r\n\r\n                } else {\r\n                    vm.handleError(res)\r\n                }\r\n            })\r\n        }\r\n    },\r\n    created() {\r\n        this.setTitle('我的订单')\r\n        this.get_list();\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/mini/components/order.vue?243db6e5","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./order.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-51115196\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./order.vue\"\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/mini/components/order.vue\n// module id = V64i\n// module chunks = 17","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    directives: [{\n      name: \"loading\",\n      rawName: \"v-loading\",\n      value: (_vm.loading),\n      expression: \"loading\"\n    }]\n  }, [_c('div', {\n    staticClass: \"ui-tags\"\n  }, [_c('span', {\n    class: {\n      'active': _vm.search.keyword == 0\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.onSearch(0)\n      }\n    }\n  }, [_vm._v(\"全部\")]), _vm._v(\" \"), _c('span', {\n    class: {\n      'active': _vm.search.keyword == 1\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.onSearch(1)\n      }\n    }\n  }, [_vm._v(\"待付款\")]), _vm._v(\" \"), _c('span', {\n    class: {\n      'active': _vm.search.keyword == 2\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.onSearch(2)\n      }\n    }\n  }, [_vm._v(\"待收货\")]), _vm._v(\" \"), _c('span', {\n    class: {\n      'active': _vm.search.keyword == 5\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.onSearch(5)\n      }\n    }\n  }, [_vm._v(\"已完成\")]), _vm._v(\" \"), _c('span', {\n    class: {\n      'active': _vm.search.keyword == 4\n    },\n    on: {\n      \"click\": function($event) {\n        _vm.onSearch(4)\n      }\n    }\n  }, [_vm._v(\"已取消\")])]), _vm._v(\" \"), (_vm.list.length > 0) ? _c('ul', {\n    directives: [{\n      name: \"infinite-scroll\",\n      rawName: \"v-infinite-scroll\",\n      value: (_vm.loadMore),\n      expression: \"loadMore\"\n    }],\n    staticClass: \"order-list\",\n    attrs: {\n      \"infinite-scroll-disabled\": \"loadComment\",\n      \"infinite-scroll-immediate-check\": false,\n      \"infinite-scroll-distance\": \"10\"\n    }\n  }, _vm._l((_vm.list), function(item, idx) {\n    return _c('li', {\n      key: idx\n    }, [_c('div', {\n      staticClass: \"h\",\n      on: {\n        \"click\": function($event) {\n          _vm.goto('/order_detail/order_id/' + item.id)\n        }\n      }\n    }, [_vm._v(\"订单号：\" + _vm._s(item.order_number) + \"\\n                \"), _c('span', {\n      staticClass: \"status\"\n    }, [_vm._v(_vm._s(item.order_status_txt))])]), _vm._v(\" \"), _vm._l((item.orders_goods), function(good, key) {\n      return _c('div', {\n        key: key,\n        staticClass: \"m\",\n        on: {\n          \"click\": function($event) {\n            _vm.goto('/order_detail/order_id/' + item.id)\n          }\n        }\n      }, [_c('img', {\n        directives: [{\n          name: \"lazy\",\n          rawName: \"v-lazy\",\n          value: (good.good_img),\n          expression: \"good.good_img\"\n        }],\n        attrs: {\n          \"width\": \"50\",\n          \"height\": \"50\"\n        }\n      }), _vm._v(\" \"), _c('div', {\n        staticClass: \"info\"\n      }, [_c('div', {\n        staticClass: \"title\"\n      }, [_vm._v(_vm._s(good.good_title))])]), _vm._v(\" \"), _c('div', {\n        staticClass: \"tool\"\n      }, [(item.pay_method == 3) ? _c('div', [_vm._v(\"积分 \" + _vm._s(good.credits))]) : _c('div', [_vm._v(\"￥\" + _vm._s(good.price))]), _vm._v(\" \"), _c('div', [_vm._v(\"x \" + _vm._s(good.buy_num))])])])\n    }), _vm._v(\" \"), _c('div', {\n      staticClass: \"b\"\n    }, [(item.pay_method == 3) ? _c('div', [_vm._v(\"订单总额：积分 \" + _vm._s(item.minus_credits))]) : _c('div', [_vm._v(\"订单总额：￥\" + _vm._s(item.total_amount))]), _vm._v(\" \"), _c('div', [(item.pay_status == 1 && item.pay_method != 2) ? _c('button', {\n      staticClass: \"ui-btn active\",\n      attrs: {\n        \"type\": \"button\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.goto('/pay/order_id/' + item.id)\n        }\n      }\n    }, [_vm._v(\"付款\")]) : _vm._e(), _vm._v(\" \"), (item.comment_status == 1) ? _c('button', {\n      staticClass: \"ui-btn active\",\n      attrs: {\n        \"type\": \"button\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.goto('/start/order_id/' + item.id)\n        }\n      }\n    }, [_vm._v(\"评价\")]) : _vm._e(), _vm._v(\" \"), (item.refund == 1) ? _c('button', {\n      staticClass: \"ui-btn active\",\n      attrs: {\n        \"type\": \"button\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.refund(idx)\n        }\n      }\n    }, [_vm._v(\"退款\")]) : _vm._e(), _vm._v(\" \"), (item.exchange == 1) ? _c('button', {\n      staticClass: \"ui-btn active\",\n      attrs: {\n        \"type\": \"button\"\n      },\n      on: {\n        \"click\": function($event) {\n          _vm.exchange(idx)\n        }\n      }\n    }, [_vm._v(\"换货\")]) : _vm._e()])])], 2)\n  })) : _c('div', {\n    staticClass: \"nodata\"\n  }, [_c('i', {\n    staticClass: \"iconfont icon-tongyongmeiyoushuju\"\n  }), _vm._v(\" \"), _c('div', [_vm._v(\"您还没有订单记录~\")])])])\n}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-51115196\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/mini/components/order.vue\n// module id = oToY\n// module chunks = 17"],"sourceRoot":""}