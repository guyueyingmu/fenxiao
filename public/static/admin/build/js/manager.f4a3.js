webpackJsonp([9],{"4Z1t":function(e,t,a){"use strict";var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"page_heade"},[a("el-form",{attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{label:"角色名称"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"角色名称"},model:{value:e.formInline.keyword,callback:function(t){e.formInline.keyword=t},expression:"formInline.keyword"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSearch()}}},[e._v("搜索")]),e._v(" "),e.isSearch?a("el-button",{attrs:{type:"danger"},on:{click:e.onReset}},[e._v("清空搜索")]):e._e()],1)],1),e._v(" "),a("el-button",{staticClass:"goods_add_btn",attrs:{type:"warning"},on:{click:function(t){e.open(!1)}}},[e._v("添加管理员")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:e.list,border:"","row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"管理员姓名",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:"后台登录账号",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"role_name",label:"所属角色",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"login_time",label:"最近登录时间",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"add_time",label:"添加时间",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-radio-group",{attrs:{size:"small"},on:{change:function(a){e.changeStatus(t.row)}},model:{value:t.row.status,callback:function(e){t.row.status=e},expression:"scope.row.status"}},[a("el-radio-button",{attrs:{label:1}},[e._v("启用")]),e._v(" "),a("el-radio-button",{attrs:{label:2}},[e._v("禁用")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.viewCtrl(t.row.role_id)}}},[e._v("查看权限")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.open(!0,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.onRemove(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"pagination"},[parseInt(e.pages.total_page,10)>1?a("el-pagination",{attrs:{"current-page":parseInt(e.pages.current_page,10),"page-size":parseInt(e.pages.limit,10),total:e.pages.total,layout:"total, prev, pager, next,jumper"},on:{"current-change":e.handleCurrentChange}}):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:"添加管理员",visible:e.dialogFormVisible,open:e.open},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"管理员姓名"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dialog.nickname,callback:function(t){e.dialog.nickname=t},expression:"dialog.nickname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"后台登录账号"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dialog.user_name,callback:function(t){e.dialog.user_name=t},expression:"dialog.user_name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码"}},[a("el-input",{attrs:{placeholder:"不输入则不修改","auto-complete":"off"},model:{value:e.dialog.password,callback:function(t){e.dialog.password=t},expression:"dialog.password"}})],1),e._v(" "),e.dialog.password?a("el-form-item",{attrs:{label:"确认密码"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:e.dialog.repassword,callback:function(t){e.dialog.repassword=t},expression:"dialog.repassword"}})],1):e._e(),e._v(" "),a("el-form-item",{attrs:{label:"所属角色"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dialog.role_id,callback:function(t){e.dialog.role_id=t},expression:"dialog.role_id"}},e._l(e.role_list,function(e){return a("el-option",{key:e.id,attrs:{label:e.role_name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"状态"}},[a("el-radio-group",{model:{value:e.dialog.status,callback:function(t){e.dialog.status=t},expression:"dialog.status"}},[a("el-radio",{attrs:{label:1}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("禁用")])],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.save_menu}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"查看权限",visible:e.dialogFormVisible2},on:{"update:visible":function(t){e.dialogFormVisible2=t}}},[a("el-tree",{ref:"tree",attrs:{data:e.menu_list,"show-checkbox":"","node-key":"id"}}),e._v(" "),a("div",{staticClass:"dialog-footer",slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible2=!1}}},[e._v("确 定")])],1)],1)],1)},o=[],i={render:l,staticRenderFns:o};t.a=i},AagS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("o15R"),o=a("4Z1t"),i=a("VU/8"),s=i(l.a,o.a,null,null,null);t.default=s.exports},o15R:function(e,t,a){"use strict";var l=a(4),o=a(2);a.n(o);t.a={mixins:[l.default],components:{"el-tree":o.Tree},data:function(){return{isSearch:!1,formInline:{keyword:""},menu_list:[],dialogFormVisible:!1,dialogFormVisible2:!1,dialogLoading:!1,role_list:[],dialog:{nickname:"",user_name:"",repassword:"",password:"",role_id:"",status:""},list:[]}},methods:{tableRowClassName:function(e,t){return 2==e.status?"status_off":""},getType:function(e){var t=parseInt(e,10);return this.$store.getters.GOODTYPE[t-1].label},onReset:function(){this.formInline={keyword:""},this.get_list(1),this.isSearch=!1},onSearch:function(e){this.isSearch=!0,e=e||1;var t=this.formInline;this.get_list(e,t)},get_list:function(e,t){e=e||1;var a="/admin/Manager/get_list?page="+e,l=this;l.loading=!0,this.apiGet(a,t).then(function(e){e.code?(l.list=e.data.list,l.pages=e.data.pages):l.handleError(e),l.loading=!1})},onRemove:function(e){var t=this;this.$confirm("你确定要删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.removeData(e)}).catch(function(){})},removeData:function(e){var t="/admin/manager/del_user?user_id="+e.id,a=this;a.loading=!0,this.apiGet(t).then(function(e){e.code?(a.$message({type:"success",message:e.msg}),a.get_list()):a.handleError(e),a.loading=!1})},open:function(e,t){this.dialogFormVisible=!0;var a=this;setTimeout(function(){e?(a.dialog.nickname=t.nickname,a.dialog.user_name=t.user_name,a.dialog.role_id=t.role_id,a.dialog.user_id=t.id,a.dialog.status=t.status,a.dialog.password="",a.dialog.repassword=""):(a.dialog.nickname="",a.dialog.user_name="",a.dialog.status=1)},100)},changeStatus:function(e){var t=this,a={user_id:e.id,status:e.status};this.apiPost("/admin/manager/modify_user",a).then(function(e){t.dialogLoading=!1,e.code?(t.$message.success(e.msg),t.dialogFormVisible=!1):t.handleError(e)})},get_role_list:function(){var e=this;this.apiGet("/admin/manager/add_user").then(function(t){t.code?e.role_list=t.data.role:e.handleError(t)})},save_menu:function(){var e=this;this.apiPost("/admin/manager/save_user",e.dialog).then(function(t){e.dialogLoading=!1,t.code?(e.$message.success(t.msg),e.dialogFormVisible=!1,e.get_list()):e.handleError(t)})},viewCtrl:function(e){this.dialogFormVisible2=!0;var t=this,a="/admin/manager/view_ctrl?role_id="+e;this.apiGet(a).then(function(e){if(e.code){t.menu_list=e.data.menu;var a=e.data.auth;t.$refs.tree.setCheckedKeys(a)}else t.handleError(e)})}},created:function(){this.get_list(),this.get_role_list(),this.setBreadcrumb(["系统","管理员"])}}}});