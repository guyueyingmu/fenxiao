webpackJsonp([12],{DxeN:function(e,t,a){"use strict";var o=a("RHyO");t.a={mixins:[o.default],data:function(){return{dalogi_title:["","实物商品发货","虚拟商品服务","预约商品服务","积分商品发货","积分商品服务"],dalogi_loading:!1,dialog_temp:{},dialogForm:{consignment_user:"",deliver_method:"",consignment_time:"",tracking_number:"",good_type:"",service_user:"",service_time:"",total_amount:"",note:""},dialogFormVisible:!1,tabs:"",value8:"",isSearch:!1,formInline:{order_status:"",keyword:"",pay_status:"",start_time:"",end_time:""},list:[]}},methods:{killOrder:function(e,t){this.dialogForm={consignment_user:"",deliver_method:"",consignment_time:"",tracking_number:"",good_type:"",service_user:"",service_time:"",note:""},this.dialogFormVisible=!0,this.dialog_temp=e,this.dialogForm.order_id=e.id,this.dialogForm.good_type=e.orders_goods[0].good_type},dialog_ok:function(){var e="/admin/order/consignment",t=this,a=this.dialogForm;2!=this.dialogForm.good_type&&5!=this.dialogForm.good_type&&3!=this.dialogForm.good_type||(e="/admin/order/service"),t.dalogi_loading=!0,this.apiPost(e,a).then(function(e){e.code?(t.$message.success(e.msg),t.dialogFormVisible=!1):t.handleError(e),t.dalogi_loading=!1})},fromDate:function(e){if(e){var t=e.split(" - ");this.formInline.start_time=t[0],this.formInline.end_time=t[1]}},fromDate2:function(e){this.dialogForm.consignment_time=e},fromDate3:function(e){this.dialogForm.service_time=e},onSelectedTabs:function(e){var t=e.name,a={order_status:t};this.get_list(1,a)},tableRowClassName:function(e,t){return 2==e.status?"status_off":""},getType:function(e){var t=parseInt(e,10);return this.$store.getters.GOODTYPE[t-1].label},onReset:function(){this.formInline={order_status:"",keyword:"",pay_status:"",start_time:"",end_time:""},this.get_list(1),this.isSearch=!1},onSearch:function(e){this.isSearch=!0,e=e||1;var t=this.formInline;this.get_list(e,t)},get_list:function(e,t){e=e||1;var a="/admin/order/get_list?page="+e,o=this;o.loading=!0,this.apiGet(a,t).then(function(e){e.code?(o.list=e.data.list,o.pages=e.data.pages):o.handleError(e),o.loading=!1})},OnCannelOrder:function(e){var t=this;this.$confirm("是否取消当前订单?","提示",{confirmButtonText:"确定取消",cancelButtonText:"点错了",type:"warning"}).then(function(){t.removeData(e)}).catch(function(){})},removeData:function(e){var t=this.list[e],a="/admin/order/cancel?order_id="+t.id,o=this;o.loading=!0,this.apiGet(a).then(function(t){t.code?(o.list.splice(e,1),o.$message({type:"success",message:t.msg})):o.handleError(t),o.loading=!1})}},created:function(){this.get_list(),this.setBreadcrumb(["订单","订单列表"])}}},EvPz:function(e,t,a){"use strict";var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"tabs_p"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.onSelectedTabs},model:{value:e.tabs,callback:function(t){e.tabs=t},expression:"tabs"}},[a("el-tab-pane",{attrs:{label:"全部订单",name:"0"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"待处理订单",name:"1"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"已服务订单",name:"3"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"已取消订单",name:"4"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"已完成订单",name:"5"}})],1)],1),e._v(" "),a("div",{staticClass:"page_heade"},[a("el-form",{attrs:{inline:!0,model:e.formInline}},[a("el-form-item",{attrs:{"label-width":"1"}},[a("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"订单编号/用户手机"},model:{value:e.formInline.keyword,callback:function(t){e.$set(e.formInline,"keyword",t)},expression:"formInline.keyword"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"订单状态"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"订单状态",clearable:""},model:{value:e.formInline.order_status,callback:function(t){e.$set(e.formInline,"order_status",t)},expression:"formInline.order_status"}},[a("el-option",{attrs:{value:"1",label:"待处理"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"已发货"}}),e._v(" "),a("el-option",{attrs:{value:"3",label:"已服务"}}),e._v(" "),a("el-option",{attrs:{value:"4",label:"已取消"}}),e._v(" "),a("el-option",{attrs:{value:"5",label:"已完成"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"支付状态"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"支付状态",clearable:""},model:{value:e.formInline.pay_status,callback:function(t){e.$set(e.formInline,"pay_status",t)},expression:"formInline.pay_status"}},[a("el-option",{attrs:{value:"1",label:"未支付"}}),e._v(" "),a("el-option",{attrs:{value:"2",label:"已支付"}}),e._v(" "),a("el-option",{attrs:{value:"3",label:"已退费"}}),e._v(" "),a("el-option",{attrs:{value:"4",label:"支付失败"}}),e._v(" "),a("el-option",{attrs:{value:"5",label:"退费失败"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"下单日期"}},[a("el-date-picker",{attrs:{type:"daterange",align:"right",placeholder:"选择日期范围","picker-options":e.pickerOptions},on:{change:e.fromDate},model:{value:e.value7,callback:function(t){e.value7=t},expression:"value7"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.onSearch()}}},[e._v("搜索")]),e._v(" "),e.isSearch?a("el-button",{attrs:{type:"danger"},on:{click:e.onReset}},[e._v("清空搜索")]):e._e()],1)],1)],1),e._v(" "),e.list&&e.list.length?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"order-list-2"},[a("ul",e._l(e.list,function(t,o){return a("li",{key:t.id},[a("div",{staticClass:"li-head"},[a("span",[a("b",[e._v(e._s(t.add_time))])]),e._v(" "),a("span",[e._v("订单号: "+e._s(t.order_number))]),e._v(" "),a("span",[e._v("￥"+e._s(t.total_amount))]),e._v(" "),a("span",["已支付"==t.pay_status_txt?a("em",{staticClass:"red"},[e._v(" "+e._s(t.pay_status_txt))]):a("em",[e._v(e._s(t.pay_status_txt))]),e._v(" "),t.pay_method_txt?a("em",[e._v("（"+e._s(t.pay_method_txt)+"）")]):e._e()]),e._v(" "),a("span",[e._v("来源: "+e._s(t.order_from_txt))]),e._v(" "),a("span",[e._v("状态："),a("em",{class:{red:1==t.order_status}},[e._v(e._s(t.order_status_txt))])]),e._v(" "),a("span",[e._v("手机: "+e._s(t.phone_number))]),e._v(" "),a("span",[e._v("完成时间："+e._s(t.finish_time||"无"))]),e._v(" "),a("span",{staticStyle:{"padding-right":"1em"}},[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.goto("/orders/order_id/"+t.id)}}},[e._v("查看详情")]),e._v(" "),1==t.order_status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){e.OnCannelOrder(o)}}},[e._v("取消订单")]):e._e()],1)]),e._v(" "),a("div",{staticClass:"li-mian"},[a("table",{staticStyle:{width:"100%"}},[e._m(0,!0),e._v(" "),e._l(t.orders_goods,function(l,i){return a("tr",{key:l.id},[a("td",{staticClass:"center"},[e._v("商品ID:"+e._s(l.good_id))]),e._v(" "),a("td",{staticClass:"center"},[a("div",{staticClass:"thumb-list"},[a("div",{staticClass:"pic"},[a("img",{attrs:{src:l.good_img,width:"80",height:"80"}})]),e._v(" "),a("div",{staticClass:"info"},[a("div",{staticClass:"title"},[e._v(e._s(l.good_title))]),e._v(" "),a("div",{staticClass:"des"},[e._v("商品分类："+e._s(l.cat_name))])])])]),e._v(" "),a("td",{staticClass:"right",staticStyle:{"padding-right":"7em"}},[a("div",[e._v("￥"+e._s(l.price))]),e._v(" "),a("div",[e._v("x "+e._s(l.buy_num))])]),e._v(" "),0==i?a("td",{staticClass:"t-left tool_no_border",staticStyle:{"padding-left":"7em"},attrs:{rowspan:t.orders_goods.length}},[1==t.order_status&&2==t.pay_status||3==l.good_type&&1==t.pay_status?a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){e.killOrder(t,o)}}},[e._v("\n                                                "+e._s(1==l.good_type||4==l.good_type?"立即发货":"立即服务"))]):a("span",{staticStyle:{color:"#ccc"}},[e._v("\n                                                无操作\n                                            ")])],1):e._e()])})],2)])])}))]):a("div",{staticClass:"no-data"},[e._v("\n        没有数据\n    ")]),e._v(" "),a("div",{staticClass:"pagination"},[parseInt(e.pages.total_page,10)>1?a("el-pagination",{attrs:{"current-page":parseInt(e.pages.current_page,10),"page-size":parseInt(e.pages.limit,10),total:e.pages.total,layout:"total, prev, pager, next,jumper"},on:{"current-change":e.handleCurrentChange}}):e._e()],1),e._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.dalogi_loading,expression:"dalogi_loading"}],attrs:{title:e.dalogi_title[e.dialogForm.good_type],visible:e.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[1==e.dialogForm.good_type||4==e.dialogForm.good_type?a("el-form",{attrs:{model:e.dialogForm,inline:!0}},[a("el-form-item",{attrs:{label:"发货员","label-width":"100px"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"发货员"},model:{value:e.dialogForm.consignment_user,callback:function(t){e.$set(e.dialogForm,"consignment_user",t)},expression:"dialogForm.consignment_user"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"发货时间","label-width":"100px"}},[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期"},on:{change:e.fromDate2},model:{value:e.dialogForm.consignment_time,callback:function(t){e.$set(e.dialogForm,"consignment_time",t)},expression:"dialogForm.consignment_time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"配送方式","label-width":"100px"}},[a("el-select",{staticStyle:{width:"193px"},attrs:{placeholder:"请选择配送方式"},model:{value:e.dialogForm.deliver_method,callback:function(t){e.$set(e.dialogForm,"deliver_method",t)},expression:"dialogForm.deliver_method"}},[a("el-option",{attrs:{label:"上门自提",value:1}}),e._v(" "),a("el-option",{attrs:{label:"快递",value:2}}),e._v(" "),a("el-option",{attrs:{label:"其他",value:3}})],1)],1),e._v(" "),2==e.dialogForm.deliver_method?a("el-form-item",{staticClass:"is-required",attrs:{label:"快递编号","label-width":"100px"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"快递编号"},model:{value:e.dialogForm.tracking_number,callback:function(t){e.$set(e.dialogForm,"tracking_number",t)},expression:"dialogForm.tracking_number"}})],1):e._e()],1):e._e(),e._v(" "),2==e.dialogForm.good_type||5==e.dialogForm.good_type||3==e.dialogForm.good_type?a("el-form",{attrs:{model:e.dialogForm,inline:!0}},[a("el-form-item",{attrs:{label:"服务员","label-width":"100px"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"发货员"},model:{value:e.dialogForm.service_user,callback:function(t){e.$set(e.dialogForm,"service_user",t)},expression:"dialogForm.service_user"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"服务时间","label-width":"100px"}},[a("el-date-picker",{attrs:{type:"datetime",editable:!1,placeholder:"选择日期"},on:{change:e.fromDate3},model:{value:e.dialogForm.service_time,callback:function(t){e.$set(e.dialogForm,"service_time",t)},expression:"dialogForm.service_time"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"备注","label-width":"100px"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"备注"},model:{value:e.dialogForm.note,callback:function(t){e.$set(e.dialogForm,"note",t)},expression:"dialogForm.note"}})],1),e._v(" "),3==e.dialogForm.good_type?a("el-form-item",{attrs:{label:"线下收款","label-width":"100px"}},[a("el-input",{attrs:{"auto-complete":"off",placeholder:"收款总额"},model:{value:e.dialogForm.total_amount,callback:function(t){e.$set(e.dialogForm,"total_amount",t)},expression:"dialogForm.total_amount"}})],1):e._e()],1):e._e(),e._v(" "),a("div",{staticClass:"dialog_main"},[a("h4",{staticClass:"dialog_order_title"},[e._v("订单信息")]),e._v(" "),a("div",{staticClass:"dialog_order_info"},[a("el-row",[a("el-col",{attrs:{span:12}},[e._v("\n                        订单编号：\n                        "),a("span",[e._v(e._s(e.dialog_temp.order_number))]),e._v(" "),a("br"),e._v(" 用户手机：\n                        "),a("span",[e._v(e._s(e.dialog_temp.phone_number))])]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("\n                        下单用户：\n                        "),a("span",[e._v(e._s(e.dialog_temp.nickname))]),e._v(" "),a("br"),e._v(" 用户手机：\n                        "),a("span",[e._v(e._s(e.dialog_temp.add_time))])])],1)],1),e._v(" "),e.dialog_temp.consignee_name?a("h4",{staticClass:"dialog_order_title"},[e._v("收货人信息")]):e._e(),e._v(" "),e.dialog_temp.consignee_name?a("div",{staticClass:"dialog_order_info"},[a("el-row",[a("el-col",{attrs:{span:12}},[e._v("\n                        收货人：\n                        "),a("span",[e._v(e._s(e.dialog_temp.consignee_name))])]),e._v(" "),a("el-col",{attrs:{span:12}},[e._v("\n                        下单用户：\n                        "),a("span",[e._v(e._s(e.dialog_temp.consignee_phone))])]),e._v(" "),a("el-col",[e._v("\n                        收货人地址：\n                        "),a("span",[e._v(e._s(e.dialog_temp.consignee_address))])])],1)],1):e._e()]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.dialog_ok}},[e._v("确 定")])],1)],1)],1)},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("colgroup",[a("col",{attrs:{width:"120"}}),e._v(" "),a("col",{attrs:{width:"500"}}),e._v(" "),a("col",{attrs:{width:"200"}}),e._v(" "),a("col")])}],i={render:o,staticRenderFns:l};t.a=i},pQLz:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("DxeN"),l=a("EvPz"),i=a("VU/8"),s=i(o.a,l.a,!1,null,null,null);t.default=s.exports}});